<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="icon" href="/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><meta name="theme-color" content="#ffffff"><meta name="google-site-verification"><title>百川电商SDK 接入说明及注意点 | Qson</title><meta name="description" content="Qson的文档, vuepress 文档"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.21">
    <link rel="modulepreload" href="/assets/app.ea66aa66.js"><link rel="modulepreload" href="/assets/baichuan.html.d938da34.js"><link rel="modulepreload" href="/assets/baichuan.html.8bbbd34f.js">
    <link rel="stylesheet" href="/assets/style.67180fdf.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/" class=""><img class="logo" src="/hero.jpg" alt="Qson"><span class="site-name can-hide">Qson</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="iOS"><span class="title">iOS</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="iOS"><span class="title">iOS</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/ios/ui/" class="nav-link" aria-label="UI"><!--[--><!--]--> UI <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ios/foundation/" class="nav-link" aria-label="Foundation"><!--[--><!--]--> Foundation <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ios/sdk/" class="nav-link router-link-active" aria-label="SDK"><!--[--><!--]--> SDK <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ios/bugs/" class="nav-link" aria-label="常见bug"><!--[--><!--]--> 常见bug <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ios/material/" class="nav-link" aria-label="资料收集"><!--[--><!--]--> 资料收集 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/flutter/" class="nav-link" aria-label="Flutter"><!--[--><!--]--> Flutter <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/UI/" class="nav-link" aria-label="UI"><!--[--><!--]--> UI <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="后端"><span class="title">后端</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="后端"><span class="title">后端</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/backend/java/" class="nav-link" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/swift/" class="nav-link" aria-label="Swift"><!--[--><!--]--> Swift <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/nodejs/" class="nav-link" aria-label="Nodejs"><!--[--><!--]--> Nodejs <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/nestjs/" class="nav-link" aria-label="Nestjs"><!--[--><!--]--> Nestjs <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/golang/" class="nav-link" aria-label="Golang"><!--[--><!--]--> Golang <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/nginx/" class="nav-link" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/traefik/" class="nav-link" aria-label="Traefik"><!--[--><!--]--> Traefik <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/mysql/" class="nav-link" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/mongodb/" class="nav-link" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/redis/" class="nav-link" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/docker/" class="nav-link" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/internet/" class="nav-link" aria-label="互联网那些事"><!--[--><!--]--> 互联网那些事 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="开发工具"><span class="title">开发工具</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="开发工具"><span class="title">开发工具</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/tools/git/" class="nav-link" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/tools/github/" class="nav-link" aria-label="Github"><!--[--><!--]--> Github <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/tools/vscode/" class="nav-link" aria-label="VSCode"><!--[--><!--]--> VSCode <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/tools/chrome/" class="nav-link" aria-label="Chrome Developer tools"><!--[--><!--]--> Chrome Developer tools <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/tools/bookmark-scripts/" class="nav-link" aria-label="Bookmark scripts"><!--[--><!--]--> Bookmark scripts <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="关于"><span class="title">关于</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="关于"><span class="title">关于</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/about/me/" class="nav-link" aria-label="关于我们"><!--[--><!--]--> 关于我们 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/about/app/" class="nav-link" aria-label="app"><!--[--><!--]--> app <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Qson8/documents" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="iOS"><span class="title">iOS</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="iOS"><span class="title">iOS</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/ios/ui/" class="nav-link" aria-label="UI"><!--[--><!--]--> UI <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ios/foundation/" class="nav-link" aria-label="Foundation"><!--[--><!--]--> Foundation <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ios/sdk/" class="nav-link router-link-active" aria-label="SDK"><!--[--><!--]--> SDK <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ios/bugs/" class="nav-link" aria-label="常见bug"><!--[--><!--]--> 常见bug <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ios/material/" class="nav-link" aria-label="资料收集"><!--[--><!--]--> 资料收集 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/flutter/" class="nav-link" aria-label="Flutter"><!--[--><!--]--> Flutter <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/UI/" class="nav-link" aria-label="UI"><!--[--><!--]--> UI <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="后端"><span class="title">后端</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="后端"><span class="title">后端</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/backend/java/" class="nav-link" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/swift/" class="nav-link" aria-label="Swift"><!--[--><!--]--> Swift <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/nodejs/" class="nav-link" aria-label="Nodejs"><!--[--><!--]--> Nodejs <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/nestjs/" class="nav-link" aria-label="Nestjs"><!--[--><!--]--> Nestjs <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/golang/" class="nav-link" aria-label="Golang"><!--[--><!--]--> Golang <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/nginx/" class="nav-link" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/traefik/" class="nav-link" aria-label="Traefik"><!--[--><!--]--> Traefik <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/mysql/" class="nav-link" aria-label="MySQL"><!--[--><!--]--> MySQL <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/mongodb/" class="nav-link" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/redis/" class="nav-link" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/backend/docker/" class="nav-link" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/internet/" class="nav-link" aria-label="互联网那些事"><!--[--><!--]--> 互联网那些事 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="开发工具"><span class="title">开发工具</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="开发工具"><span class="title">开发工具</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/tools/git/" class="nav-link" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/tools/github/" class="nav-link" aria-label="Github"><!--[--><!--]--> Github <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/tools/vscode/" class="nav-link" aria-label="VSCode"><!--[--><!--]--> VSCode <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/tools/chrome/" class="nav-link" aria-label="Chrome Developer tools"><!--[--><!--]--> Chrome Developer tools <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/tools/bookmark-scripts/" class="nav-link" aria-label="Bookmark scripts"><!--[--><!--]--> Bookmark scripts <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="关于"><span class="title">关于</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="关于"><span class="title">关于</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/about/me/" class="nav-link" aria-label="关于我们"><!--[--><!--]--> 关于我们 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/about/app/" class="nav-link" aria-label="app"><!--[--><!--]--> app <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Qson8/documents" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item active">SDK</p><ul class=""><li><!--[--><a href="/ios/sdk/" class="nav-link router-link-active sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/ios/sdk/baichuan.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="百川电商SDK 接入说明及注意点"><!--[--><!--]--> 百川电商SDK 接入说明及注意点 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h4 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h4><p>最近在接触阿里百川SDK过程中，发现一些问题觉得有必要通过文档让大家了解下，首先看下阿里百川是什么？ 阿里百川开放淘系电商能力，帮助APP开发者在各种场景下快速、低成本搭建无线电商导购业务，开发用户消费需求，实现商业变现。</p><h4 id="接入准备" tabindex="-1"><a class="header-anchor" href="#接入准备" aria-hidden="true">#</a> 接入准备</h4><p>建议阅读下官方文档中的<a href="https://baichuan.taobao.com/docs/doc.htm?spm=a3c0d.7629140.0.0.470bbe48GhqZ4k&amp;treeId=129&amp;articleId=104528&amp;docType=1" target="_blank" rel="noopener noreferrer">接入指南<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>，有相关介绍这里就不累赘，主要提下重点要注意的。</p><p><code>安全图片</code> ： 务必按要求配置好安全图片，并放入项目中。安全图片其实就是将项目签名，包名等信息存储在图片中，编译启动时进行校验，图片名称必须按照规定。 如果有多个项目，务必选择好对应的项目，否则会导致鉴于不匹配情况。</p><img src="/ios/sdk/Snip20190822_1.png" alt="https://img01.jituwang.com/171030/256786-1G030214S965.jpg"><h4 id="开始集成sdk" tabindex="-1"><a class="header-anchor" href="#开始集成sdk" aria-hidden="true">#</a> 开始集成SDK</h4><ul><li><p>安全图片放入项目中，图片名为yw_1222.jpg</p></li><li><p>推荐使用Cocoapod方式接入SDK</p><div class="language-text ext-text"><pre class="language-text"><code>终端中执行以下命令，添加百川的源
pod repo add AliBCSpecs http://repo.baichuan-ios.taobao.com/baichuanSDK/AliBCSpecs.git
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>Podfile添加(具体版本以百川开发者网站为准)
source &#39;http://repo.baichuan-ios.taobao.com/  baichuanSDK/AliBCSpecs.git&#39;
pod &#39;AlibcTradeSDK&#39;
</code></pre></div><p>手动方式引入SDK参考<a href="https://baichuan.taobao.com/docs/doc.htm?spm=a3c0d.7629140.0.0.45f8be48T93N9B&amp;treeId=129&amp;articleId=105648&amp;docType=1" target="_blank" rel="noopener noreferrer">文档<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>,这里就不讲了。</p></li><li><p>配置URL Types</p><p>URL Scheme为tbopen{AppKey},如tbopen123456</p><p>是在阿里百川注册的应用AppKey</p><img src="/ios/sdk/1566457415236.png" alt="https://img01.jituwang.com/171030/256786-1G030214S965.jpg"></li><li><p>Info.plist配置</p><div class="language-text ext-text"><pre class="language-text"><code>在info.plist中,增加LSApplicationQueriesSchemes字段,并添加tbopen,tmall
</code></pre></div> <img src="/ios/sdk/Snip20190822_3.png" alt="https://img01.jituwang.com/171030/256786-1G030214S965.jpg"></li></ul><div class="language-text ext-text"><pre class="language-text"><code>配置ATS，允许HTTP请求
</code></pre></div><ul><li><p>SDK初始化 在 AppDelegate 中初始化SDK</p><div class="language-text ext-text"><pre class="language-text"><code>import &lt;AlibcTradeSDK/AlibcTradeSDK.h&gt;

- (BOOL)application:(UIApplication *)application {
    // 百川平台基础SDK初始化，加载并初始化各个业务能力插件
    [[AlibcTradeSDK sharedInstance] asyncInitWithSuccess:^{
         
    } failure:^(NSError *error) {
        NSLog(@&quot;Init failed: %@&quot;, error.description);
    }];
     
    // 开发阶段打开日志开关，方便排查错误信息
    //默认调试模式打开日志,release关闭,可以不调用下面的函数
    [[AlibcTradeSDK sharedInstance] setDebugLogOpen:YES];
     
    // 配置全局的淘客参数
    //如果没有阿里妈妈的淘客账号,setTaokeParams函数需要调用
    AlibcTradeTaokeParams *taokeParams = [[AlibcTradeTaokeParams alloc] init];
    taokeParams.pid = @&quot;mm_XXXXX&quot;; //mm_XXXXX为你自己申请的阿里妈妈淘客pid
    [[AlibcTradeSDK sharedInstance] setTaokeParams:taokeParams];
     
    //设置全局的app标识，在电商模块里等同于isv_code
    //没有申请过isv_code的接入方,默认不需要调用该函数
    [[AlibcTradeSDK sharedInstance] setISVCode:@&quot;your_isv_code&quot;];
     
    // 设置全局配置，是否强制使用h5
    [[AlibcTradeSDK sharedInstance] setIsForceH5:NO];
 
    return YES;
}
</code></pre></div></li><li><p>处理应用跳转</p><p>为了正常使用百川内置的应用跳转处理，需要调用百川SDK的方法。建议优先调用百川处理，如果百川已处理，可以直接返回YES；当然，也可以继续处理，比如记录应用跳转来源日志等。 以下代码不现实,会导致通过手淘授权登陆,跳回来没反应等问题</p><div class="language-text ext-text"><pre class="language-text"><code>// iOS9以下的实现这个方法，如果需要兼容iOS9以下的话
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation{
    /* 老接口写法 已弃用，建议使用新接口
    if (![[AlibcTradeSDK sharedInstance] handleOpenURL:url]) {
        // 处理其他app跳转到自己的app
    }
    return YES;
    */
 
    // 新接口写法
    if (![[AlibcTradeSDK sharedInstance] application:application 
                                             openURL:url 
                                   sourceApplication:sourceApplication 
                                          annotation:annotation]) {
        // 处理其他app跳转到自己的app
    }
    return YES;
</code></pre></div><div class="language-text ext-text"><pre class="language-text"><code>    // iOS9以上的实现这个方法
    - (BOOL)application:(UIApplication *)application openURL:(NSURL *)url options:(NSDictionary&lt;NSString *,id&gt; *)options {
     
    /* 老接口写法 已弃用，建议使用新接口
    if (![[AlibcTradeSDK sharedInstance] handleOpenURL:url]) {
        // 处理其他app跳转到自己的app
    }
    return YES;
    */
 
    // 新接口写法
    if (![[AlibcTradeSDK sharedInstance] application:application
                                             openURL:url
                                             options:options]) {
        //处理其他app跳转到自己的app，如果百川处理过会返回YES
    }
    return YES;} 
</code></pre></div></li><li><p>方法说明</p><div class="language-text ext-text"><pre class="language-text"><code>/**
 * 使用isv自己的webview打开page，可以实现淘宝账号免登以及电商交易支付流程
 *
 * @param parentController            webView所在的view controller.
 * @param webView                     isv自己的webview,请先设置好自己的delegate先调用本接口,否则拦截登陆等逻辑会失效
 * @param page                        想要打开的page
 * @param showParams                  打开方式的一些自定义参数
 * @param taoKeParams                 淘客参数
 * @param trackParam                  链路跟踪参数
 * @param tradeProcessSuccessCallback 交易流程中成功回调(加购成功/发生支付)
 * @param tradeProcessFailedCallback  交易流程中退出或者调用发生错误的回调
 *
 * @return  0:  标识跳转到手淘打开了
            1:  标识用h5打开
           -1:  标识出错
 */
- (NSInteger)           show:(UIViewController * __nonnull)parentController
                     webView:(nullable UIWebView*)webView
                        page:(id&lt;AlibcTradePage&gt; __nonnull)page
                  showParams:(nullable AlibcTradeShowParams*)showParams
                 taoKeParams:(nullable AlibcTradeTaokeParams *)taoKeParams
                  trackParam:(nullable NSDictionary*)trackParam
 tradeProcessSuccessCallback:(nullable void (^)(AlibcTradeResult * __nullable result))onSuccess
  tradeProcessFailedCallback:(nullable void (^)(NSError * __nullable error))onFailure;
</code></pre></div></li></ul><div class="language-text ext-text"><pre class="language-text"><code>    showParams 参数
    
    1. 调起手淘
    AlibcTradeShowParams* showParam = [[AlibcTradeShowParams alloc] init];
   showParam.openType = AlibcOpenTypeNative;
   // showParam.backUrl=@&quot;tbopenXXXXX://&quot;; // 官方文档的有问题
   showParam.backUrl=@&quot;tbopenXXXXX&quot;; // 亲测有效
   showParam.isNeedPush=isNeedPush;  
                     
   2. 调起天猫
   AlibcTradeShowParams* showParam = [[AlibcTradeShowParams alloc] init];
   showParam.openType = AlibcOpenTypeNative;
   // showParam.backUrl=@&quot;tbopenXXXXX://&quot;; // 官方文档的有问题
   showParam.backUrl=@&quot;tbopenXXXXX&quot;; // 亲测有效
   showParam.isNeedPush=isNeedPush;
   showParam.linkKey = @&quot;tmall_scheme&quot;;//拉起天猫
</code></pre></div><pre><code>```
page参数 page详情页可以通过自己WebView显示，也可以使用SDK定制的
其中page参数用于指定需要打开的页面,可以使用的页面类型如下表,由AlibcTradePageFactory生成：

//打开SDK定制商品详情页
id&lt;AlibcTradePage&gt; page = [AlibcTradePageFactory itemDetailPage: @”123456”];
 
//根据链接打开页面
id&lt;AlibcTradePage&gt; page = [AlibcTradePageFactory page: @&quot;http://h5.m.taobao.com/cm/snap/index.html?id=527140984722&quot;];
 
//打开店铺
id&lt;AlibcTradePage&gt; page = [AlibcTradePageFactory shopPage: @”12333333”];
 
 
//淘客信息
AlibcTradeTaokeParams *taoKeParams=[[AlibcTradeTaokeParams alloc] init];
taoKeParams.pid=nil; //
//打开方式
AlibcTradeShowParams* showParam = [[AlibcTradeShowParams alloc] init];
showParam.openType = AlibcOpenTypeAuto;
 
[[AlibcTradeSDK sharedInstance].tradeService show: self.navigationController page:page showParams:showParam taoKeParams: nil trackParam: trackParam tradeProcessSuccessCallback:self.onTradeSuccess tradeProcessFailedCallback:self.onTradeFailure];
```

```
自定义WebView显示详情页

id&lt;AlibcTradePage&gt; page = [AlibcTradePageFactory itemDetailPage: @”123456”];
//淘客信息
AlibcTradeTaokeParams *taoKeParams=[[AlibcTradeTaokeParams alloc] init];
taoKeParams.pid= nil;
//打开方式
AlibcTradeShowParams* showParam = [[AlibcTradeShowParams alloc] init];
showParam.openType = AlibcOpenTypeAuto;
 
 
// YourWebViewController类中,webview的delegate设置不能放在viewdidload里面,必须在init的时候,否则函数调用的时候还是nil
  YourTradeWebViewController* myView = [[YourTradeWebViewController alloc] init];
   
 
 NSInteger ret = [[AlibcTradeSDK sharedInstance].tradeService show: myView webView: myView.webView page:page showParams:showParam taoKeParams: taoKeParams trackParam:nil tradeProcessSuccessCallback:self.onTradeSuccess tradeProcessFailedCallback:self.onTradeFailure];
 //返回1,说明h5打开,否则不应该展示页面
 if (ret == 1) {
       [self.navigationController pushViewController:view animated:YES];
 }
```
</code></pre><h4 id="注意点" tabindex="-1"><a class="header-anchor" href="#注意点" aria-hidden="true">#</a> 注意点：</h4><p>官网文档基本讲的非常清楚，但在开发中才会遇到一点坑，这边在最后给大家讲讲我在对接过程中遇到的问题，帮大家规避，我遇到的问题也花了不少时间解决，阿里的SDK有个毛病，就是客服太难联系上，而且只留个旺旺群，还得下载个旺信，加群，然后群里也没人回复解答，最近自己只能靠自己。</p><ul><li><code>安全图片</code>，如果不是你接的SDK，或者未对该图片了解和备注，很可能把图片当成废弃的删了，有朋友就遇到这个问题，删了APP上线无法跳转到手淘，就比较坑了，在这里特别提醒大家一下，建议在项目中用个文件夹装着，引入项目中，文件夹后面加上中文备注。</li></ul><img src="/ios/sdk/Snip20190822_6.png" alt="https://img01.jituwang.com/171030/256786-1G030214S965.jpg"><ul><li><code>backUrl</code>设置有误，导致跳转到手淘，然后点击返回，回不来App</li></ul><img src="/ios/sdk/Snip20190822_7.png" alt="https://img01.jituwang.com/171030/256786-1G030214S965.jpg"><pre><code>上面是官方文档的写法，一开始也是对照文档这么配置backUrl，结果就是在手淘点返回一直回不来，期间花了不少时间，重新对文档，查配置情况，一无所获。后来试着改成下面这样，就OK了!
</code></pre><img src="/ios/sdk/Snip20190822_9.png" alt="https://img01.jituwang.com/171030/256786-1G030214S965.jpg"><p>希望这篇文章能给到大家一些帮助，如有疑问欢迎一同来学习交流。QQ群:912759811。</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/Qson8/documents/edit/master/docs/ios/sdk/baichuan.md" rel="noopener noreferrer" target="_blank" aria-label="编辑文档！"><!--[--><!--]--> 编辑文档！ <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><span class="meta-item-info">2021/8/24 下午4:14:15</span></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 455063392@qq.com">Qson</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/ios/sdk/" class="nav-link router-link-active" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.ea66aa66.js" defer></script>
  </body>
</html>
